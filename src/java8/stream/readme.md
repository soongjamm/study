
# ìŠ¤íŠ¸ë¦¼ (Stream)
- `Stream`ì´ë€ ì–´ë–¤ ì‹œí€€ì…œí•˜ê±°ë‚˜ ë³‘ë ¬ì ì¸ ì˜¤í¼ë ˆì´ì…˜ì„ ì œê³µí•˜ëŠ” elementë“¤ì˜ ì—°ì† ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. 
    - ì½œë ‰ì…˜ì´ë‚˜ ì–´ë–¤ ì—°ì†ëœ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì˜¤í¼ë ˆì´ì…˜ë“¤ì˜ ëª¨ìŒ
- `Collection`ì€ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ìˆëŠ” ì €ì¥ì†Œì§€ë§Œ, Streamì€ ê·¸ ìì²´ê°€ ë°ì´í„°ë‚˜ ì €ì¥ì†ŒëŠ” ì•„ë‹ˆë‹¤.
    - Collectionì€ ìì²´ê°€ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê²ƒì´ê³ , ìŠ¤íŠ¸ë¦¼ì€ ê·¸ê²ƒì„ ì†ŒìŠ¤ë¡œ ì¨ì„œ ì–´ë–¤ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ê²ƒì´ë‹¤.
    - ì¦‰ Streamì€ ë°ì´í„°ë¥¼ ë‹´ëŠ” ì €ì¥ì†Œê°€ ì•„ë‹ˆë‹¤.
- _Functional in nature_
    - ì›ë˜ ì†ŒìŠ¤ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
    - ì–´ë– í•œ Streamì„ ì–»ì–´ì™€ ì˜¤í˜ë ˆì´ì…˜ì„ ìˆ˜í–‰í•˜ë©´ ê·¸ ê²°ê³¼ëŠ” Streamì´ê³ , ì›ë³¸ ë°ì´í„°ëŠ” ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤.
    > ë¦¬í„´ê°’ì´ Streamì´ë¼ëŠ” ê±´ ì¤‘ê°œ ì˜¤í¼ë ˆì´ì…˜ì˜ ê²½ìš°. í„°ë¯¸ë„ ì˜¤í¼ë ˆì´ì…˜ì€ Streamì´ ë°˜í™˜ë˜ëŠ”ê±´ ì•„ë‹ˆë‹¤.

> ### ì¤‘ê°œ ì˜¤í¼ë ˆì´ì…˜? í„°ë¯¸ë„ ì˜¤í¼ë ˆì´ì…˜?  
> Stream APIì—ëŠ” í¬ê²Œ ë‘ ê°€ì§€ ì¢…ë¥˜ê°€ ìˆë‹¤.    
> - `ì¤‘ê°œ ì˜¤í¼ë ˆì´ì…˜(Intermediate Operation)`
>   - Streamì„ ë¦¬í„´í•˜ê¸° ë•Œë¬¸ì— ê³„ì† ì´ì–´ì„œ Stream APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¢…ë¥˜ì˜ ë©”ì„œë“œë‹¤.
>   - map() ê°™ì€ ì¤‘ê°œí˜• ì˜¤í¼ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ê³  `.`ì„ ì°ìœ¼ë©´ ë‹¤ë¥¸ Stream APIë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
> - `ì¢…ë£Œí˜• ì˜¤í¼ë ˆì´ì…˜(Terminate Operation)`
>   - Streamì„ ì¢…ë£Œì‹œí‚¤ëŠ” ì˜¤í¼ë ˆì´ì…˜ì´ë‹¤. 
>   - ì¤‘ê°œí˜• ì˜¤í¼ë ˆì´ì…˜ê³¼ ê°€ì¥ í° ì°¨ì´ëŠ” Streamì´ ì•„ë‹Œ, **ë‹¤ë¥¸ íƒ€ì…ì„ ë¦¬í„´í•œë‹¤ëŠ” ê²ƒì´ë‹¤.**

> #### Streamì„ ë¹„ìœ í•˜ìë©´  
> Collection ì´ë¼ëŠ” ë°•ìŠ¤ì— ë‹´ê¸´ ì›ì†Œë“¤ì„ í•˜ë‚˜ì”© ë³µì‚¬í•´ì„œ ì»¨ë² ì´ì–´ ë²¨íŠ¸ì— ì˜¬ë¦°ë‹¤.  
> ë³µì‚¬ëœ ì›ì†Œë“¤ì— ì–´ë– í•œ ê°€ê³µì„ í•œë‹¤.  
> ê·¸ë¦¬ê³  ê·¸ ê°€ê³µëœ ì›ì†Œë“¤ì„ ë°•ìŠ¤ì— ë‹´ëŠ”ë‹¤. 
> ì»¨ë² ì´ì–´ ë²¨íŠ¸ê°€ ìŠ¤íŠ¸ë¦¼ì´ë‹¤.

- Streamì€ ë°ì´í„°ë¥¼ í•œë²ˆë§Œ ê±°ì¹˜ê³  ì§€ë‚˜ê°„ë‹¤. (ì»¨ë² ì´ì–´ ë²¨íŠ¸ì²˜ëŸ¼)
- ë¬´ì œí•œ/ì‹¤ì‹œê°„ìœ¼ë¡œ ë„˜ì–´ì˜¤ëŠ” ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆê³ , `Short Circuit` ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•´ì„œ ê·¸ ìˆ˜ë¥¼ ì œí•œí•  ìˆ˜ ìˆë‹¤. 
- `ì¤‘ê°œ(intermediate) ì˜¤í¼ë ˆì´ì…˜`ì€ ê·¼ë³¸ì ìœ¼ë¡œ lazy í•˜ë‹¤.

> #### lazy í•˜ë‹¤?
> `ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸` ì´ë¼ëŠ” ì»¨ë² ì´ì–´ ë²¨íŠ¸ì—ëŠ” ì¤‘ê°œ ì˜¤í¼ë ˆì´í„°ë¥¼ 0ê°œ ë˜ëŠ” ì—¬ëŸ¬ê°œ ì˜¬ë¦´ ìˆ˜ ìˆë‹¤.   
> ì¤‘ê°œ ì˜¤í¼ë ˆì´í„°ê°€ ì˜¤ë˜. ì˜¤ì§€ ì•Šë˜ ì¤‘ìš”í•œê±´ ë°˜ë“œì‹œ `ì¢…ë£Œí˜• ì˜¤í¼ë ˆì´í„°`ê°€ ì™€ì•¼ ì‹¤í–‰ëœë‹¤.  
> ì¢…ë£Œí˜• ì˜¤í¼ë ˆì´í„°ê°€ ì˜¤ê¸°ì „ê¹Œì§€ ì¤‘ê°œ ì˜¤í¼ë ˆì´í„°ëŠ” ë¬´ì˜ë¯¸í•˜ë‹¤.  
> ì˜ˆë¥¼ ë“¤ì–´, map() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ê³  ì¢…ë£Œí˜• ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´, map() ë©”ì†Œë“œì˜ ë‚´ìš©ì´ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.  
> ì™œëƒí•˜ë©´ ì¤‘ê°œí˜•ì€ ì¢…ë£Œí˜•ì´ ì˜¤ê¸°ì „ì—ëŠ” ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.

- ì†ì‰½ê²Œ ë³‘ë ¬ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.
ìŠ¤íŠ¸ë¦¼ì„ ì•ˆì“°ê³  ë³‘ë ¬ì²˜ë¦¬ë¥¼ í• ë• 
    - ```java
        for (String name: names) {
            if (name)...ë©€í‹°ì“°ë ˆë“œ..
        }
      ```
    - ì´ë ‡ê²Œ í•˜ëŠ”ë°, ì´ëŸ° ì‘ì—…ì„ ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ì–´ë µë‹¤.
    - ìŠ¤íŠ¸ë¦¼ê°™ì€ ê²½ìš° `Parallel stream`ì„ ë°›ì•„ì„œ (jvmì´ ì•Œì•„ì„œ) ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
    - ì‹¤ì œë¡œ ì“°ë ˆë“œ ì´ë¦„ì„ ì°ì–´ë³´ë©´.. ì“°ë ˆë“œê°€ ë‹¤ë¥¸ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.
  
> #### ë³‘ë ¬ ì²˜ë¦¬ë¥¼ ì“´ë‹¤ê³  ë¹ ë¥´ì§„ ì•Šë‹¤. ì˜¤íˆë ¤ ëŠë ¤ì§€ê¸°ë„ í•œë‹¤.
> ì“°ë ˆë“œë¥¼ ë§Œë“¤ì–´ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì—ë„ ë¹„ìš©ì´ ë“¤ê¸° ë•Œë¬¸ì´ë‹¤. (ë§Œë“¤ê³  ìˆ˜ì§‘í•˜ê³  ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ ë¹„ìš© ë“±)
> ìœ ìš©í• ë•ŒëŠ” ë°ì´í„°ê°€ ì •ë§ ë°©ëŒ€í•˜ê²Œ í° ê²½ìš°ë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ëŠ” ê·¸ëƒ¥ ìŠ¤íŠ¸ë¦¼ì„ ì¨ë„ ëœë‹¤.
> ë“±ë“± ì¼€ì´ìŠ¤ë§ˆë‹¤ ë‹¤ë¥´ë‹ˆê¹Œ ì„±ëŠ¥ ì¸¡ì •í•´ì„œ íš¨ê³¼ê°€ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•´ë³´ëŠ”ê²Œ ì¢‹ë‹¤.


## ìŠ¤íŠ¸ë¦¼ API
- filter(), map() ë“±ì€ ìƒëµ
- `flatMap()`
```
List<List<OnlineClass>> keesunEvents = new ArrayList<>();
keesunEvents.add(springClasses);
keesunEvents.add(javaClasses);
``` 
ì´ë ‡ê²Œ 2ì°¨ì› ë¦¬ìŠ¤íŠ¸ê°€ ìˆê³ , springClasses ë¼ëŠ” ë¦¬ìŠ¤íŠ¸ì™€ javaClasses ë¼ëŠ” ë¦¬ìŠ¤íŠ¸ê°€ ì €ì¥ë˜ìˆë‹¤.  
ë§Œì•½ ë‘ í´ë˜ìŠ¤ì˜ ì´ë¦„ë“¤ì„ ë½‘ì•„ì˜¨ ìŠ¤íŠ¸ë¦¼ì„ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´?  

**keesunEvents**ë¡œ streamì„ ë§Œë“¤ë©´ streamì—ëŠ” **springClasses**ì˜ Listë“¤ì´ elementë¡œ ì¡´ì¬í•œë‹¤.
`flatMap()`ì„ ì‚¬ìš©í•˜ë©´ ì´ Listë“¤ì„ flatí•˜ê²Œ ë§Œë“¤ì–´ì¤€ë‹¤.  
flatí•˜ê²Œ ë§Œë“¤ì–´ ì¤€ë‹¤ëŠ” ê²ƒì€ ë¦¬ìŠ¤íŠ¸ë¡œ ë¬¶ì—¬ìˆëŠ” ê²ƒì„ í’€ì–´ì¤€ë‹¤ëŠ” ê²ƒì´ë‹¤.  

ì˜ˆë¥¼ë“¤ì–´ **keesunEvents**ë¼ëŠ” ë¦¬ìŠ¤íŠ¸ ì•ˆì— **springClasses**ë¼ëŠ” ë¦¬ìŠ¤íŠ¸ê°€ ìˆê³ , ê·¸ ë¦¬ìŠ¤íŠ¸ ì•ˆì—ëŠ” **Java7, Java8** ì´ë¼ëŠ” **OnlineClass** ë¼ëŠ” íƒ€ì…ì˜ ë°ì´í„°ë“¤ì´ ìˆë‹¤.
ì—¬ê¸°ì„œ **keesunEvents**ì— `flatMap()`ì„ ì ìš©ì‹œí‚¤ë©´ **springClasses**ì˜ Listë“¤ì´ ì•„ë‹Œ, Listë“¤ ì•ˆì— ìˆëŠ” ë°ì´í„°ë“¤ì„ êº¼ë‚´ì„œ ë‚˜ì—´ì‹œì¼œë²„ë¦°ë‹¤.

```java
        keesunEvents.stream()
//              .flatMap(list -> list.stream())
                .flatMap(Collection::stream) // ë©”ì†Œë“œ ë ˆí¼ëŸ°ìŠ¤
                .forEach(oc -> System.out.println(oc.getId())); // OnlineClass íƒ€ì…ì´ ì˜¨ë‹¤.
```

- ëª‡ íšŒëŠ” ì§€ë‚˜ì¹˜ê³ , ëª‡ íšŒê¹Œì§€ë¡œ ì œí•œí•˜ëŠ” ë°©ë²•ì€ `iterate()`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
  ```java
  Stream.iterate(10, i -> i + 1)
  .skip(10)
  .limit(10)
  .forEach(System.out::println);
  ```

> ğŸ’¡**Tip**
> OnlineClassê°€ isClosed()ë¼ëŠ” ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìˆëŠ”ë°, ë©”ì†Œë“œ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì“°ë©´ ë‹«í˜€ìˆë‚˜? -> trueë°–ì— í™•ì¸í•˜ì§€ ëª»í•œë‹¤.  
> ì¦‰, ë‹«í˜€ìˆë‹¤ëŠ” ëŒ€ë‹µì€ ë“¤ì„ ìˆ˜ ìˆëŠ”ë°, ì—´ë ¤ìˆë‹¤ëŠ” ëŒ€ë‹µì€ ëª»ë“£ëŠ”ë‹¤. (`stream.filter(OnlineClass::isClosed))` ë¥¼ ë°˜ëŒ€ë¡œ í‘œí˜„í•˜ê³  ì‹¶ë‹¤ëŠ” ì˜ë¯¸)
> 
> ì´ëŸ´ë•Œ, ìë°”11ë¶€í„° ì œê³µí•˜ëŠ” `Predicate.not()` ì´ë¼ëŠ” ìŠ¤íƒœí‹± ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
> `stream.filter(Predicate.not((OnlineClass::isClosed)))`